"use strict";

Object.defineProperty(exports, "t", {
    value: true
});

exports.default = void 0;

var _TreeNode = require("./TreeNode");

var _ContainerBase = require("../../ContainerBase");

var _throwError = require("../../../utils/throwError");

class TreeContainer extends _ContainerBase.Container {
    constructor(e = function(e, t) {
        if (e < t) return -1;
        if (e > t) return 1;
        return 0;
    }, t = false) {
        super();
<<<<<<< HEAD
        this.X = undefined;
        this.v = e;
        this.enableIndex = t;
        this.re = t ? _TreeNode.TreeNodeEnableIndex : _TreeNode.TreeNode;
        this.h = new this.re;
    }
    U(e, t) {
=======
        this.Y = undefined;
        this.v = e;
        if (t) {
            this.re = _TreeNode.TreeNodeEnableIndex;
            this.M = function(e, t, i) {
                const s = this.ne(e, t, i);
                if (s) {
                    let e = s.tt;
                    while (e !== this.h) {
                        e.rt += 1;
                        e = e.tt;
                    }
                    const t = this.he(s);
                    if (t) {
                        const {parentNode: e, grandParent: i, curNode: s} = t;
                        e.ie();
                        i.ie();
                        s.ie();
                    }
                }
                return this.i;
            };
            this.V = function(e) {
                let t = this.fe(e);
                while (t !== this.h) {
                    t.rt -= 1;
                    t = t.tt;
                }
            };
        } else {
            this.re = _TreeNode.TreeNode;
            this.M = function(e, t, i) {
                const s = this.ne(e, t, i);
                if (s) this.he(s);
                return this.i;
            };
            this.V = this.fe;
        }
        this.h = new this.re;
    }
    X(e, t) {
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        let i = this.h;
        while (e) {
            const s = this.v(e.u, t);
            if (s < 0) {
<<<<<<< HEAD
                e = e.K;
            } else if (s > 0) {
                i = e;
                e = e.T;
=======
                e = e.W;
            } else if (s > 0) {
                i = e;
                e = e.U;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
            } else return e;
        }
        return i;
    }
<<<<<<< HEAD
    Y(e, t) {
        let i = this.h;
        while (e) {
            const s = this.v(e.u, t);
            if (s <= 0) {
                e = e.K;
            } else {
                i = e;
                e = e.T;
            }
        }
        return i;
    }
=======
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
    Z(e, t) {
        let i = this.h;
        while (e) {
            const s = this.v(e.u, t);
<<<<<<< HEAD
            if (s < 0) {
                i = e;
                e = e.K;
            } else if (s > 0) {
                e = e.T;
            } else return e;
=======
            if (s <= 0) {
                e = e.W;
            } else {
                i = e;
                e = e.U;
            }
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        }
        return i;
    }
    $(e, t) {
        let i = this.h;
        while (e) {
            const s = this.v(e.u, t);
            if (s < 0) {
                i = e;
<<<<<<< HEAD
                e = e.K;
            } else {
                e = e.T;
=======
                e = e.W;
            } else if (s > 0) {
                e = e.U;
            } else return e;
        }
        return i;
    }
    rr(e, t) {
        let i = this.h;
        while (e) {
            const s = this.v(e.u, t);
            if (s < 0) {
                i = e;
                e = e.W;
            } else {
                e = e.U;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
            }
        }
        return i;
    }
<<<<<<< HEAD
    ne(e) {
        while (true) {
            const t = e.it;
=======
    ue(e) {
        while (true) {
            const t = e.tt;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
            if (t === this.h) return;
            if (e.ee === 1) {
                e.ee = 0;
                return;
            }
<<<<<<< HEAD
            if (e === t.T) {
                const i = t.K;
                if (i.ee === 1) {
                    i.ee = 0;
                    t.ee = 1;
                    if (t === this.X) {
                        this.X = t.te();
                    } else t.te();
                } else {
                    if (i.K && i.K.ee === 1) {
                        i.ee = t.ee;
                        t.ee = 0;
                        i.K.ee = 0;
                        if (t === this.X) {
                            this.X = t.te();
                        } else t.te();
                        return;
                    } else if (i.T && i.T.ee === 1) {
                        i.ee = 1;
                        i.T.ee = 0;
=======
            if (e === t.U) {
                const i = t.W;
                if (i.ee === 1) {
                    i.ee = 0;
                    t.ee = 1;
                    if (t === this.Y) {
                        this.Y = t.te();
                    } else t.te();
                } else {
                    if (i.W && i.W.ee === 1) {
                        i.ee = t.ee;
                        t.ee = 0;
                        i.W.ee = 0;
                        if (t === this.Y) {
                            this.Y = t.te();
                        } else t.te();
                        return;
                    } else if (i.U && i.U.ee === 1) {
                        i.ee = 1;
                        i.U.ee = 0;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                        i.se();
                    } else {
                        i.ee = 1;
                        e = t;
                    }
                }
            } else {
<<<<<<< HEAD
                const i = t.T;
                if (i.ee === 1) {
                    i.ee = 0;
                    t.ee = 1;
                    if (t === this.X) {
                        this.X = t.se();
                    } else t.se();
                } else {
                    if (i.T && i.T.ee === 1) {
                        i.ee = t.ee;
                        t.ee = 0;
                        i.T.ee = 0;
                        if (t === this.X) {
                            this.X = t.se();
                        } else t.se();
                        return;
                    } else if (i.K && i.K.ee === 1) {
                        i.ee = 1;
                        i.K.ee = 0;
=======
                const i = t.U;
                if (i.ee === 1) {
                    i.ee = 0;
                    t.ee = 1;
                    if (t === this.Y) {
                        this.Y = t.se();
                    } else t.se();
                } else {
                    if (i.U && i.U.ee === 1) {
                        i.ee = t.ee;
                        t.ee = 0;
                        i.U.ee = 0;
                        if (t === this.Y) {
                            this.Y = t.se();
                        } else t.se();
                        return;
                    } else if (i.W && i.W.ee === 1) {
                        i.ee = 1;
                        i.W.ee = 0;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                        i.te();
                    } else {
                        i.ee = 1;
                        e = t;
                    }
                }
            }
        }
    }
<<<<<<< HEAD
    V(e) {
        if (this.i === 1) {
            this.clear();
            return;
        }
        let t = e;
        while (t.T || t.K) {
            if (t.K) {
                t = t.K;
                while (t.T) t = t.T;
            } else {
                t = t.T;
            }
            const i = e.u;
            e.u = t.u;
            t.u = i;
            const s = e.l;
            e.l = t.l;
            t.l = s;
            e = t;
        }
        if (this.h.T === t) {
            this.h.T = t.it;
        } else if (this.h.K === t) {
            this.h.K = t.it;
        }
        this.ne(t);
        let i = t.it;
        if (t === i.T) {
            i.T = undefined;
        } else i.K = undefined;
        this.i -= 1;
        this.X.ee = 0;
        if (this.enableIndex) {
            while (i !== this.h) {
                i.st -= 1;
                i = i.it;
            }
        }
    }
    tt(e) {
        const t = typeof e === "number" ? e : undefined;
        const i = typeof e === "function" ? e : undefined;
        const s = typeof e === "undefined" ? [] : undefined;
        let r = 0;
        let n = this.X;
        const h = [];
        while (h.length || n) {
            if (n) {
                h.push(n);
                n = n.T;
            } else {
                n = h.pop();
                if (r === t) return n;
                s && s.push(n);
                i && i(n, r, this);
                r += 1;
                n = n.K;
            }
        }
        return s;
    }
    he(e) {
        while (true) {
            const t = e.it;
            if (t.ee === 0) return;
            const i = t.it;
            if (t === i.T) {
                const s = i.K;
                if (s && s.ee === 1) {
                    s.ee = t.ee = 0;
                    if (i === this.X) return;
                    i.ee = 1;
                    e = i;
                    continue;
                } else if (e === t.K) {
                    e.ee = 0;
                    if (e.T) {
                        e.T.it = t;
                    }
                    if (e.K) {
                        e.K.it = i;
                    }
                    t.K = e.T;
                    i.T = e.K;
                    e.T = t;
                    e.K = i;
                    if (i === this.X) {
                        this.X = e;
                        this.h.it = e;
                    } else {
                        const t = i.it;
                        if (t.T === i) {
                            t.T = e;
                        } else t.K = e;
                    }
                    e.it = i.it;
                    t.it = e;
                    i.it = e;
                    i.ee = 1;
                } else {
                    t.ee = 0;
                    if (i === this.X) {
                        this.X = i.se();
                    } else i.se();
                    i.ee = 1;
                    return;
                }
            } else {
                const s = i.T;
                if (s && s.ee === 1) {
                    s.ee = t.ee = 0;
                    if (i === this.X) return;
                    i.ee = 1;
                    e = i;
                    continue;
                } else if (e === t.T) {
                    e.ee = 0;
                    if (e.T) {
                        e.T.it = i;
                    }
                    if (e.K) {
                        e.K.it = t;
                    }
                    i.K = e.T;
                    t.T = e.K;
                    e.T = i;
                    e.K = t;
                    if (i === this.X) {
                        this.X = e;
                        this.h.it = e;
                    } else {
                        const t = i.it;
                        if (t.T === i) {
                            t.T = e;
                        } else t.K = e;
                    }
                    e.it = i.it;
                    t.it = e;
                    i.it = e;
                    i.ee = 1;
                } else {
                    t.ee = 0;
                    if (i === this.X) {
                        this.X = i.te();
                    } else i.te();
                    i.ee = 1;
                    return;
                }
            }
            if (this.enableIndex) {
                t.ie();
                i.ie();
                e.ie();
            }
            return;
        }
    }
    M(e, t, i) {
        if (this.X === undefined) {
            this.i += 1;
            this.X = new this.re(e, t, 0);
            this.X.it = this.h;
            this.h.it = this.h.T = this.h.K = this.X;
            return this.i;
        }
        let s;
        const r = this.h.T;
        const n = this.v(r.u, e);
        if (n === 0) {
            r.l = t;
            return this.i;
        } else if (n > 0) {
            r.T = new this.re(e, t);
            r.T.it = r;
            s = r.T;
            this.h.T = s;
        } else {
            const r = this.h.K;
            const n = this.v(r.u, e);
            if (n === 0) {
                r.l = t;
                return this.i;
            } else if (n < 0) {
                r.K = new this.re(e, t);
                r.K.it = r;
                s = r.K;
                this.h.K = s;
=======
    fe(e) {
        if (this.i === 1) {
            this.clear();
            return this.h;
        }
        let t = e;
        while (t.U || t.W) {
            if (t.W) {
                t = t.W;
                while (t.U) t = t.U;
            } else {
                t = t.U;
            }
            [e.u, t.u] = [ t.u, e.u ];
            [e.l, t.l] = [ t.l, e.l ];
            e = t;
        }
        if (this.h.U === t) {
            this.h.U = t.tt;
        } else if (this.h.W === t) {
            this.h.W = t.tt;
        }
        this.ue(t);
        const i = t.tt;
        if (t === i.U) {
            i.U = undefined;
        } else i.W = undefined;
        this.i -= 1;
        this.Y.ee = 0;
        return i;
    }
    oe(e, t) {
        if (e === undefined) return false;
        const i = this.oe(e.U, t);
        if (i) return true;
        if (t(e)) return true;
        return this.oe(e.W, t);
    }
    he(e) {
        while (true) {
            const t = e.tt;
            if (t.ee === 0) return;
            const i = t.tt;
            if (t === i.U) {
                const s = i.W;
                if (s && s.ee === 1) {
                    s.ee = t.ee = 0;
                    if (i === this.Y) return;
                    i.ee = 1;
                    e = i;
                    continue;
                } else if (e === t.W) {
                    e.ee = 0;
                    if (e.U) e.U.tt = t;
                    if (e.W) e.W.tt = i;
                    t.W = e.U;
                    i.U = e.W;
                    e.U = t;
                    e.W = i;
                    if (i === this.Y) {
                        this.Y = e;
                        this.h.tt = e;
                    } else {
                        const t = i.tt;
                        if (t.U === i) {
                            t.U = e;
                        } else t.W = e;
                    }
                    e.tt = i.tt;
                    t.tt = e;
                    i.tt = e;
                    i.ee = 1;
                    return {
                        parentNode: t,
                        grandParent: i,
                        curNode: e
                    };
                } else {
                    t.ee = 0;
                    if (i === this.Y) {
                        this.Y = i.se();
                    } else i.se();
                    i.ee = 1;
                }
            } else {
                const s = i.U;
                if (s && s.ee === 1) {
                    s.ee = t.ee = 0;
                    if (i === this.Y) return;
                    i.ee = 1;
                    e = i;
                    continue;
                } else if (e === t.U) {
                    e.ee = 0;
                    if (e.U) e.U.tt = i;
                    if (e.W) e.W.tt = t;
                    i.W = e.U;
                    t.U = e.W;
                    e.U = i;
                    e.W = t;
                    if (i === this.Y) {
                        this.Y = e;
                        this.h.tt = e;
                    } else {
                        const t = i.tt;
                        if (t.U === i) {
                            t.U = e;
                        } else t.W = e;
                    }
                    e.tt = i.tt;
                    t.tt = e;
                    i.tt = e;
                    i.ee = 1;
                    return {
                        parentNode: t,
                        grandParent: i,
                        curNode: e
                    };
                } else {
                    t.ee = 0;
                    if (i === this.Y) {
                        this.Y = i.te();
                    } else i.te();
                    i.ee = 1;
                }
            }
            return;
        }
    }
    ne(e, t, i) {
        if (this.Y === undefined) {
            this.i += 1;
            this.Y = new this.re(e, t);
            this.Y.ee = 0;
            this.Y.tt = this.h;
            this.h.tt = this.Y;
            this.h.U = this.Y;
            this.h.W = this.Y;
            return;
        }
        let s;
        const r = this.h.U;
        const n = this.v(r.u, e);
        if (n === 0) {
            r.l = t;
            return;
        } else if (n > 0) {
            r.U = new this.re(e, t);
            r.U.tt = r;
            s = r.U;
            this.h.U = s;
        } else {
            const r = this.h.W;
            const n = this.v(r.u, e);
            if (n === 0) {
                r.l = t;
                return;
            } else if (n < 0) {
                r.W = new this.re(e, t);
                r.W.tt = r;
                s = r.W;
                this.h.W = s;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
            } else {
                if (i !== undefined) {
                    const r = i.o;
                    if (r !== this.h) {
                        const i = this.v(r.u, e);
                        if (i === 0) {
                            r.l = t;
<<<<<<< HEAD
                            return this.i;
=======
                            return;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                        } else if (i > 0) {
                            const i = r.L();
                            const n = this.v(i.u, e);
                            if (n === 0) {
                                i.l = t;
<<<<<<< HEAD
                                return this.i;
                            } else if (n < 0) {
                                s = new this.re(e, t);
                                if (i.K === undefined) {
                                    i.K = s;
                                    s.it = i;
                                } else {
                                    r.T = s;
                                    s.it = r;
=======
                                return;
                            } else if (n < 0) {
                                s = new this.re(e, t);
                                if (i.W === undefined) {
                                    i.W = s;
                                    s.tt = i;
                                } else {
                                    r.U = s;
                                    s.tt = r;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                                }
                            }
                        }
                    }
                }
                if (s === undefined) {
<<<<<<< HEAD
                    s = this.X;
                    while (true) {
                        const i = this.v(s.u, e);
                        if (i > 0) {
                            if (s.T === undefined) {
                                s.T = new this.re(e, t);
                                s.T.it = s;
                                s = s.T;
                                break;
                            }
                            s = s.T;
                        } else if (i < 0) {
                            if (s.K === undefined) {
                                s.K = new this.re(e, t);
                                s.K.it = s;
                                s = s.K;
                                break;
                            }
                            s = s.K;
                        } else {
                            s.l = t;
                            return this.i;
=======
                    s = this.Y;
                    while (true) {
                        const i = this.v(s.u, e);
                        if (i > 0) {
                            if (s.U === undefined) {
                                s.U = new this.re(e, t);
                                s.U.tt = s;
                                s = s.U;
                                break;
                            }
                            s = s.U;
                        } else if (i < 0) {
                            if (s.W === undefined) {
                                s.W = new this.re(e, t);
                                s.W.tt = s;
                                s = s.W;
                                break;
                            }
                            s = s.W;
                        } else {
                            s.l = t;
                            return;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                        }
                    }
                }
            }
        }
<<<<<<< HEAD
        if (this.enableIndex) {
            let e = s.it;
            while (e !== this.h) {
                e.st += 1;
                e = e.it;
            }
        }
        this.he(s);
        this.i += 1;
        return this.i;
    }
    rt(e, t) {
        while (e) {
            const i = this.v(e.u, t);
            if (i < 0) {
                e = e.K;
            } else if (i > 0) {
                e = e.T;
=======
        this.i += 1;
        return s;
    }
    I(e, t) {
        while (e) {
            const i = this.v(e.u, t);
            if (i < 0) {
                e = e.W;
            } else if (i > 0) {
                e = e.U;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
            } else return e;
        }
        return e || this.h;
    }
    clear() {
        this.i = 0;
<<<<<<< HEAD
        this.X = undefined;
        this.h.it = undefined;
        this.h.T = this.h.K = undefined;
=======
        this.Y = undefined;
        this.h.tt = undefined;
        this.h.U = this.h.W = undefined;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
    }
    updateKeyByIterator(e, t) {
        const i = e.o;
        if (i === this.h) {
            (0, _throwError.throwIteratorAccessError)();
        }
        if (this.i === 1) {
            i.u = t;
            return true;
        }
<<<<<<< HEAD
        const s = i.B().u;
        if (i === this.h.T) {
            if (this.v(s, t) > 0) {
=======
        if (i === this.h.U) {
            if (this.v(i.B().u, t) > 0) {
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                i.u = t;
                return true;
            }
            return false;
        }
<<<<<<< HEAD
        const r = i.L().u;
        if (i === this.h.K) {
            if (this.v(r, t) < 0) {
=======
        if (i === this.h.W) {
            if (this.v(i.L().u, t) < 0) {
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
                i.u = t;
                return true;
            }
            return false;
        }
<<<<<<< HEAD
        if (this.v(r, t) >= 0 || this.v(s, t) <= 0) return false;
=======
        const s = i.L().u;
        if (this.v(s, t) >= 0) return false;
        const r = i.B().u;
        if (this.v(r, t) <= 0) return false;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        i.u = t;
        return true;
    }
    eraseElementByPos(e) {
        if (e < 0 || e > this.i - 1) {
            throw new RangeError;
        }
<<<<<<< HEAD
        const t = this.tt(e);
        this.V(t);
=======
        let t = 0;
        const i = this;
        this.oe(this.Y, (function(s) {
            if (e === t) {
                i.V(s);
                return true;
            }
            t += 1;
            return false;
        }));
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        return this.i;
    }
    eraseElementByKey(e) {
        if (this.i === 0) return false;
<<<<<<< HEAD
        const t = this.rt(this.X, e);
=======
        const t = this.I(this.Y, e);
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        if (t === this.h) return false;
        this.V(t);
        return true;
    }
    eraseElementByIterator(e) {
        const t = e.o;
        if (t === this.h) {
            (0, _throwError.throwIteratorAccessError)();
        }
<<<<<<< HEAD
        const i = t.K === undefined;
=======
        const i = t.W === undefined;
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        const s = e.iteratorType === 0;
        if (s) {
            if (i) e.next();
        } else {
<<<<<<< HEAD
            if (!i || t.T === undefined) e.next();
=======
            if (!i || t.U === undefined) e.next();
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
        }
        this.V(t);
        return e;
    }
<<<<<<< HEAD
    getHeight() {
        if (this.i === 0) return 0;
        function traversal(e) {
            if (!e) return 0;
            return Math.max(traversal(e.T), traversal(e.K)) + 1;
        }
        return traversal(this.X);
=======
    forEach(e) {
        let t = 0;
        for (const i of this) e(i, t++, this);
    }
    getElementByPos(e) {
        if (e < 0 || e > this.i - 1) {
            throw new RangeError;
        }
        let t;
        let i = 0;
        for (const s of this) {
            if (i === e) {
                t = s;
                break;
            }
            i += 1;
        }
        return t;
    }
    getHeight() {
        if (this.i === 0) return 0;
        const traversal = function(e) {
            if (!e) return 0;
            return Math.max(traversal(e.U), traversal(e.W)) + 1;
        };
        return traversal(this.Y);
>>>>>>> 673f6c3a713c3c5a521125c5e4ea6135afefe034
    }
}

var _default = TreeContainer;

exports.default = _default;
//# sourceMappingURL=index.js.map
